/usr/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: compiletime version 3.5 of module 'tensorflow.python.framework.fast_tensor_util' does not match runtime version 3.6
  return f(*args, **kwds)
WARNING:tensorflow:From p2p_mru.py:405: TFRecordDataset.__init__ (from tensorflow.contrib.data.python.ops.readers) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.data.TFRecordDataset`.
WARNING:tensorflow:From p2p_mru.py:908: get_or_create_global_step (from tensorflow.contrib.framework.python.ops.variables) is deprecated and will be removed in a future version.
Instructions for updating:
Please switch to tf.train.get_or_create_global_step
2018-09-04 12:29:23.336696: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA
2018-09-04 12:29:24.726076: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 0 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:94:00.0
totalMemory: 11.92GiB freeMemory: 11.85GiB
2018-09-04 12:29:25.176909: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 1 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:93:00.0
totalMemory: 11.92GiB freeMemory: 11.85GiB
2018-09-04 12:29:25.594726: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 2 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:90:00.0
totalMemory: 11.92GiB freeMemory: 11.85GiB
2018-09-04 12:29:26.036494: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 3 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:8f:00.0
totalMemory: 11.92GiB freeMemory: 11.85GiB
2018-09-04 12:29:26.441814: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 4 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:8a:00.0
totalMemory: 11.92GiB freeMemory: 11.85GiB
2018-09-04 12:29:26.823403: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 5 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:89:00.0
totalMemory: 11.92GiB freeMemory: 11.85GiB
2018-09-04 12:29:27.343421: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 6 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:86:00.0
totalMemory: 11.92GiB freeMemory: 11.85GiB
2018-09-04 12:29:27.740053: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1030] Found device 7 with properties: 
name: Tesla K80 major: 3 minor: 7 memoryClockRate(GHz): 0.8235
pciBusID: 0000:85:00.0
totalMemory: 11.92GiB freeMemory: 11.85GiB
2018-09-04 12:29:27.762877: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Device peer to peer matrix
2018-09-04 12:29:27.764222: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1051] DMA: 0 1 2 3 4 5 6 7 
2018-09-04 12:29:27.764250: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1061] 0:   Y Y Y Y Y Y Y Y 
2018-09-04 12:29:27.764261: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1061] 1:   Y Y Y Y Y Y Y Y 
2018-09-04 12:29:27.764271: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1061] 2:   Y Y Y Y Y Y Y Y 
2018-09-04 12:29:27.764283: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1061] 3:   Y Y Y Y Y Y Y Y 
2018-09-04 12:29:27.764294: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1061] 4:   Y Y Y Y Y Y Y Y 
2018-09-04 12:29:27.764304: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1061] 5:   Y Y Y Y Y Y Y Y 
2018-09-04 12:29:27.764321: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1061] 6:   Y Y Y Y Y Y Y Y 
2018-09-04 12:29:27.764331: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1061] 7:   Y Y Y Y Y Y Y Y 
2018-09-04 12:29:27.764378: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:0) -> (device: 0, name: Tesla K80, pci bus id: 0000:94:00.0, compute capability: 3.7)
2018-09-04 12:29:27.764393: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:1) -> (device: 1, name: Tesla K80, pci bus id: 0000:93:00.0, compute capability: 3.7)
2018-09-04 12:29:27.764414: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:2) -> (device: 2, name: Tesla K80, pci bus id: 0000:90:00.0, compute capability: 3.7)
2018-09-04 12:29:27.764439: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:3) -> (device: 3, name: Tesla K80, pci bus id: 0000:8f:00.0, compute capability: 3.7)
2018-09-04 12:29:27.764455: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:4) -> (device: 4, name: Tesla K80, pci bus id: 0000:8a:00.0, compute capability: 3.7)
2018-09-04 12:29:27.764475: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:5) -> (device: 5, name: Tesla K80, pci bus id: 0000:89:00.0, compute capability: 3.7)
2018-09-04 12:29:27.764493: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:6) -> (device: 6, name: Tesla K80, pci bus id: 0000:86:00.0, compute capability: 3.7)
2018-09-04 12:29:27.764510: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1120] Creating TensorFlow device (/device:GPU:7) -> (device: 7, name: Tesla K80, pci bus id: 0000:85:00.0, compute capability: 3.7)
2018-09-04 12:29:51.938324: W tensorflow/core/framework/op_kernel.cc:1192] Failed precondition: /gdata/liyh/data/CelebA/data/train; Is a directory
Traceback (most recent call last):
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py", line 1323, in _do_call
    return fn(*args)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py", line 1302, in _run_fn
    status, run_metadata)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/errors_impl.py", line 473, in __exit__
    c_api.TF_GetCode(self.status.status))
tensorflow.python.framework.errors_impl.FailedPreconditionError: /gdata/liyh/data/CelebA/data/train; Is a directory
	 [[Node: IteratorGetNext = IteratorGetNext[output_shapes=[[?,256,256,3], [?,256,256,3], [?,?]], output_types=[DT_FLOAT, DT_FLOAT, DT_UINT8], _device="/job:localhost/replica:0/task:0/device:CPU:0"](OneShotIterator)]]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "p2p_mru.py", line 1266, in <module>
    main()
  File "p2p_mru.py", line 1232, in main
    results = sess.run(fetches, options=options, run_metadata=run_metadata)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py", line 889, in run
    run_metadata_ptr)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py", line 1120, in _run
    feed_dict_tensor, options, run_metadata)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py", line 1317, in _do_run
    options, run_metadata)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py", line 1336, in _do_call
    raise type(e)(node_def, op, message)
tensorflow.python.framework.errors_impl.FailedPreconditionError: /gdata/liyh/data/CelebA/data/train; Is a directory
	 [[Node: IteratorGetNext = IteratorGetNext[output_shapes=[[?,256,256,3], [?,256,256,3], [?,?]], output_types=[DT_FLOAT, DT_FLOAT, DT_UINT8], _device="/job:localhost/replica:0/task:0/device:CPU:0"](OneShotIterator)]]

Caused by op 'IteratorGetNext', defined at:
  File "p2p_mru.py", line 1266, in <module>
    main()
  File "p2p_mru.py", line 1087, in main
    examples, iterator  = read_tfrecord()
  File "p2p_mru.py", line 411, in read_tfrecord
    photo, mat, filename = iterator.get_next()
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/data/ops/iterator_ops.py", line 259, in get_next
    name=name))
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_dataset_ops.py", line 706, in iterator_get_next
    output_shapes=output_shapes, name=name)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/op_def_library.py", line 787, in _apply_op_helper
    op_def=op_def)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py", line 2956, in create_op
    op_def=op_def)
  File "/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py", line 1470, in __init__
    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access

FailedPreconditionError (see above for traceback): /gdata/liyh/data/CelebA/data/train; Is a directory
	 [[Node: IteratorGetNext = IteratorGetNext[output_shapes=[[?,256,256,3], [?,256,256,3], [?,?]], output_types=[DT_FLOAT, DT_FLOAT, DT_UINT8], _device="/job:localhost/replica:0/task:0/device:CPU:0"](OneShotIterator)]]

